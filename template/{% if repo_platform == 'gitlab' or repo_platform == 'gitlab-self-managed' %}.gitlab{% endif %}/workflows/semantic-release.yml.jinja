semantic-release:
  image:
    name: node:24.11.1@sha256:aa648b387728c25f81ff811799bbf8de39df66d7e2d9b3ab55cc6300cb9175d9
  rules:
    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH && $CI_PIPELINE_SOURCE == "push" && $CI_PROJECT_NAMESPACE == "{{ repo_namespace }}" && $CI_PROJECT_NAME == "{{ repo_name }}" && $PAT != null
  script:
    - >
      npx
      --package @semantic-release/gitlab@13.2.9
      --package conventional-changelog-conventionalcommits@9.1.0
      --package semantic-release@25.0.2
      semantic-release
  stage: release
  variables:
    GITLAB_TOKEN: $PAT
